name: Check if Dockerfile exists
description: Checks if a Dockerfile exists in the specified repository path

inputs:
  repository:
    description: 'The repository path to check for Dockerfile'
    required: true
  working-directory:
    description: 'The working directory where the repository is checked out (default: current directory)'
    required: false
    default: '.'

outputs:
  exists:
    description: 'Whether the Dockerfile exists (true/false)'
    value: ${{ steps.check.outputs.exists }}

runs:
  using: composite
  steps:
    - name: Check if Dockerfile exists
      id: check
      shell: bash
      run: |
        WORKING_DIR="${{ inputs.working-directory }}"
        DOCKERFILE_PATH="${WORKING_DIR}/${{ inputs.repository }}/Dockerfile"

        if [ -f "${DOCKERFILE_PATH}" ]; then
          echo "exists=true" >> "$GITHUB_OUTPUT"
          echo "Dockerfile found at ${DOCKERFILE_PATH}"
        else
          echo "exists=false" >> "$GITHUB_OUTPUT"
          echo "No Dockerfile found at ${DOCKERFILE_PATH}, skipping image build"
        fi
